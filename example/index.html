<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>KEYSTATION Example</title>
	<script src="https://keystation.cosmostation.io/lib/keystation.js"></script>
</head>
<body>
	<button onclick="login();">Keystation Login</button>
	<br>
	<br>
	<button onclick="send();">Transfer</button>
	<p>result: <span id="result"></span></p>
	<script>
		var keystation = new Keystation();
		keystation.client = "https://www.mydomain.com";
		keystation.lcd = "https://lcd-do-not-abuse.cosmostation.io";
		keystation.path = "44/118/0/0/0";

		function login() {
			var prefix = "cosmos";
			var popup = keystation.openWindow("signin", prefix);
			var popupTick = setInterval(function() {
				if (popup.closed) {
					clearInterval(popupTick);
					console.log("window closed!");
				}
			}, 500);
		}

		function send() {
			// Replace txJson to your own tx msg.
			var txJson = {"account_number":"18012","chain_id":"cosmoshub-2","fee":{"amount":[{"amount":"5000","denom":"uatom"}],"gas":"200000"},"memo":"","msgs":[{"type":"cosmos-sdk/MsgSend","value":{"amount":[{"amount":"10000","denom":"uatom"}],"from_address":"cosmos1z67fshyr48pa9a6htdz4qd0zullfk6y0fgvxv7","to_address":"cosmos10nv3yj0jdxf02vxyc0tavf97fdvppdth6wmcn3"}}],"sequence":"24"};

			var txJsonStr = JSON.stringify(txJson);
			var popup = keystation.openWindow("transaction", txJsonStr);
			var popupTick = setInterval(function() {
				if (popup.closed) {
					clearInterval(popupTick);
					console.log("window closed!");
				}
			}, 500);
		}

		window.addEventListener("message", function(e) {
			console.log(e.data);
			document.getElementById("result").innerHTML = JSON.stringify(e.data);
		} , false);
	</script>
</body>
</html>